<!DOCTYPE html>
<!-- saved from url=(0127)https://docs.google.com/document/d/e/2PACX-1vT9bQJAL6A4DP1RMnx_rK6_TWWdOY34kCd9yvtZLoKc-OGckMesd-V7fXmU8fP1bS60DsQNDQzlVW9w/pub -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>W3C WebPerf Call - March 31 2022</title><link rel="shortcut icon" href="https://ssl.gstatic.com/docs/documents/images/kix-favicon7.ico"><meta name="referrer" content="strict-origin-when-cross-origin"><style type="text/css" nonce="">
      @import url("https://fonts.googleapis.com/css?family=Google+Sans");
      @import url("https://fonts.googleapis.com/css?family=Roboto");

      body {
        font-family: Roboto, arial, sans, sans-serif;
        margin: 0;
      }

      iframe {
        border: 0;
        frameborder: 0;
        height: 100%;
        width: 100%;
      }

      #banners {
        align-items: center;
        background: white;
        display: block;
        justify-content: space-between;
        position: fixed;
        top: 0;
        width: 100%;
        z-index: 100;
      }

      #banners #publish-banner {
        background-color: #e8f0fe;
        border-bottom: 1px #ccc solid;
        color: #202124;
        display: flex;
        flex: 1 1 0%;
        height: 60px;
        width: 100%;
      }

      #publish-banner-icon {
        display: flex;
        fill: #1967d2;
        margin: auto 20px;
      }

      #publish-banner-text {
        flex-grow: 1;
        margin: auto 0;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      #publish-banner-buttons {
        margin: auto 25px auto 0;
      }

      #publish-banner-buttons span {
        align-self: center;
        background-color: inherit;
        border: none;
        font-family: "Google Sans", Roboto, RobotoDraft, Helvetica, Arial, sans-serif;
        margin: 0 16px 0 32px;
      }

      #publish-banner-buttons a {
        color: #1967d2;
        cursor: pointer;
        font-family: "Google Sans", Roboto, RobotoDraft, Helvetica, Arial, sans-serif;
        font-size: 14px;
        font-weight: 500;
        line-height: 24px;
        text-decoration: none;
      }

      #banners #title-banner {
        background: white;
        border-bottom: 1px #ccc solid;
        display: flex;
        flex: 1 1 0%;
        height: 60px;
        width: 100%;
      }

      #banners #title-banner #title {
        flex-grow: 1;
        font-family: 'Google Sans';
        font-size: large;
        margin: auto 0 auto 20px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        width: 70%;
      }

      #banners #title-banner #interval {
        margin: auto 25px auto 0;
        font-family: Roboto;
        font-size: small;;
      }

      #footer {
        background: #f0f0f0;
        border-bottom: 1px #ccc solid;
        bottom: 0;
        font-family: Roboto;
        font-size: small;
        padding: 10px 10px;
        position: fixed;
        text-align: center;
        width: 100%;
      }

      #contents {
        padding: 50px 5% 50px 5%;
      }

      @media only screen and (max-device-width: 800px) {
        #banners #title-banner {
          border-bottom-width: 5px;
          height: auto;
          display: block;
        }

        #banners #title-banner #title {
          font-size: 3em;
          margin: auto 0 auto 20px;
          width: 90%;
        }

        #banners #title-banner #interval {
          font-size: 1.5em;
          margin: 10px 0 auto 25px;
        }

        #contents {
          padding: 150px 5% 80px;
        }

        #footer {
          font-size: 2em;
        }
      }

      .dash {
        padding: 0 6px;
      }
    </style></head><body><div id="banners"><div style="display:none" id="publish-banner"><span id="publish-banner-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path></svg></span><div id="publish-banner-text">Published using Google Docs</div><div id="publish-banner-buttons"><span><a target="_blank" title="Learn more" href="https://support.google.com/docs/answer/183965">Learn More</a></span><span><a href="https://docs.google.com/u/0/abuse?id=AKkXjowi6Ooputuuzfe0Kdx1FB8WEkHN2s-n85G1hvGRYfCwgRE69H1IalmTMykMfZha66gKP9EaM1GeUJ7x3aA:0"></a></span></div></div><div id="title-banner"><div id="title">W3C WebPerf Call - March 31 2022</div><div id="interval"><span></span></div></div></div><div id="contents"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=OPeqXG-QxW3ZD8BtmPikfA');.lst-kix_dwfqqvxn75qx-2>li:before{content:"\0025a0  "}.lst-kix_dwfqqvxn75qx-3>li:before{content:"\0025cf  "}.lst-kix_dwfqqvxn75qx-4>li:before{content:"\0025cb  "}.lst-kix_dwfqqvxn75qx-1>li:before{content:"\0025cb  "}.lst-kix_dwfqqvxn75qx-0>li:before{content:"\0025cf  "}.lst-kix_vnj6ek7m3uqo-7>li:before{content:"\0025cb  "}.lst-kix_vnj6ek7m3uqo-8>li:before{content:"\0025a0  "}.lst-kix_ac8rt1a0rbx6-5>li:before{content:"\0025a0  "}.lst-kix_ac8rt1a0rbx6-6>li:before{content:"\0025cf  "}.lst-kix_5sjv03mb6o3x-0>li:before{content:"\0025cf  "}.lst-kix_vnj6ek7m3uqo-5>li:before{content:"\0025a0  "}.lst-kix_vnj6ek7m3uqo-6>li:before{content:"\0025cf  "}.lst-kix_5sjv03mb6o3x-1>li:before{content:"\0025cb  "}.lst-kix_ac8rt1a0rbx6-2>li:before{content:"\0025a0  "}.lst-kix_5sjv03mb6o3x-2>li:before{content:"\0025a0  "}.lst-kix_5sjv03mb6o3x-4>li:before{content:"\0025cb  "}.lst-kix_ac8rt1a0rbx6-3>li:before{content:"\0025cf  "}.lst-kix_ac8rt1a0rbx6-4>li:before{content:"\0025cb  "}.lst-kix_5sjv03mb6o3x-3>li:before{content:"\0025cf  "}.lst-kix_vnj6ek7m3uqo-0>li:before{content:"\0025cf  "}.lst-kix_vnj6ek7m3uqo-1>li:before{content:"\0025cb  "}.lst-kix_vnj6ek7m3uqo-2>li:before{content:"\0025a0  "}.lst-kix_vnj6ek7m3uqo-4>li:before{content:"\0025cb  "}.lst-kix_vnj6ek7m3uqo-3>li:before{content:"\0025cf  "}.lst-kix_ac8rt1a0rbx6-7>li:before{content:"\0025cb  "}.lst-kix_ac8rt1a0rbx6-8>li:before{content:"\0025a0  "}.lst-kix_23mgtg714wo0-7>li:before{content:"\0025cb  "}.lst-kix_23mgtg714wo0-6>li:before{content:"\0025cf  "}.lst-kix_23mgtg714wo0-8>li:before{content:"\0025a0  "}ul.lst-kix_vnj6ek7m3uqo-6{list-style-type:none}ul.lst-kix_vnj6ek7m3uqo-5{list-style-type:none}ul.lst-kix_vnj6ek7m3uqo-8{list-style-type:none}ul.lst-kix_vnj6ek7m3uqo-7{list-style-type:none}.lst-kix_w4ahsp7yj95m-5>li:before{content:"\0025a0  "}ul.lst-kix_vnj6ek7m3uqo-2{list-style-type:none}ul.lst-kix_vnj6ek7m3uqo-1{list-style-type:none}ul.lst-kix_vnj6ek7m3uqo-4{list-style-type:none}ul.lst-kix_vnj6ek7m3uqo-3{list-style-type:none}.lst-kix_w4ahsp7yj95m-4>li:before{content:"\0025cb  "}ul.lst-kix_w4ahsp7yj95m-5{list-style-type:none}ul.lst-kix_23mgtg714wo0-6{list-style-type:none}ul.lst-kix_w4ahsp7yj95m-6{list-style-type:none}ul.lst-kix_23mgtg714wo0-5{list-style-type:none}ul.lst-kix_vnj6ek7m3uqo-0{list-style-type:none}ul.lst-kix_w4ahsp7yj95m-3{list-style-type:none}ul.lst-kix_23mgtg714wo0-8{list-style-type:none}ul.lst-kix_w4ahsp7yj95m-4{list-style-type:none}ul.lst-kix_23mgtg714wo0-7{list-style-type:none}ul.lst-kix_w4ahsp7yj95m-1{list-style-type:none}ul.lst-kix_w4ahsp7yj95m-2{list-style-type:none}ul.lst-kix_w4ahsp7yj95m-0{list-style-type:none}.lst-kix_w4ahsp7yj95m-6>li:before{content:"\0025cf  "}.lst-kix_w4ahsp7yj95m-7>li:before{content:"\0025cb  "}.lst-kix_w4ahsp7yj95m-8>li:before{content:"\0025a0  "}ul.lst-kix_23mgtg714wo0-0{list-style-type:none}ul.lst-kix_23mgtg714wo0-2{list-style-type:none}ul.lst-kix_23mgtg714wo0-1{list-style-type:none}ul.lst-kix_w4ahsp7yj95m-7{list-style-type:none}ul.lst-kix_23mgtg714wo0-4{list-style-type:none}ul.lst-kix_w4ahsp7yj95m-8{list-style-type:none}ul.lst-kix_23mgtg714wo0-3{list-style-type:none}.lst-kix_w4ahsp7yj95m-1>li:before{content:"\0025cb  "}.lst-kix_w4ahsp7yj95m-3>li:before{content:"\0025cf  "}.lst-kix_w4ahsp7yj95m-2>li:before{content:"\0025a0  "}.lst-kix_w4ahsp7yj95m-0>li:before{content:"\0025cf  "}.lst-kix_23mgtg714wo0-4>li:before{content:"\0025cb  "}ul.lst-kix_5sjv03mb6o3x-0{list-style-type:none}.lst-kix_23mgtg714wo0-5>li:before{content:"\0025a0  "}ul.lst-kix_5sjv03mb6o3x-5{list-style-type:none}ul.lst-kix_5sjv03mb6o3x-6{list-style-type:none}ul.lst-kix_5sjv03mb6o3x-7{list-style-type:none}ul.lst-kix_5sjv03mb6o3x-8{list-style-type:none}ul.lst-kix_5sjv03mb6o3x-1{list-style-type:none}ul.lst-kix_5sjv03mb6o3x-2{list-style-type:none}ul.lst-kix_5sjv03mb6o3x-3{list-style-type:none}ul.lst-kix_5sjv03mb6o3x-4{list-style-type:none}.lst-kix_23mgtg714wo0-3>li:before{content:"\0025cf  "}.lst-kix_23mgtg714wo0-2>li:before{content:"\0025a0  "}.lst-kix_23mgtg714wo0-1>li:before{content:"\0025cb  "}ul.lst-kix_dwfqqvxn75qx-4{list-style-type:none}ul.lst-kix_dwfqqvxn75qx-3{list-style-type:none}ul.lst-kix_dwfqqvxn75qx-6{list-style-type:none}.lst-kix_23mgtg714wo0-0>li:before{content:"\0025cf  "}ul.lst-kix_dwfqqvxn75qx-5{list-style-type:none}.lst-kix_5sjv03mb6o3x-6>li:before{content:"\0025cf  "}.lst-kix_5sjv03mb6o3x-8>li:before{content:"\0025a0  "}ul.lst-kix_dwfqqvxn75qx-8{list-style-type:none}ul.lst-kix_dwfqqvxn75qx-7{list-style-type:none}.lst-kix_5sjv03mb6o3x-5>li:before{content:"\0025a0  "}.lst-kix_ac8rt1a0rbx6-1>li:before{content:"\0025cb  "}.lst-kix_ac8rt1a0rbx6-0>li:before{content:"\0025cf  "}.lst-kix_5sjv03mb6o3x-7>li:before{content:"\0025cb  "}ul.lst-kix_dwfqqvxn75qx-0{list-style-type:none}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}ul.lst-kix_dwfqqvxn75qx-2{list-style-type:none}ul.lst-kix_dwfqqvxn75qx-1{list-style-type:none}ul.lst-kix_ac8rt1a0rbx6-6{list-style-type:none}.lst-kix_dwfqqvxn75qx-5>li:before{content:"\0025a0  "}.lst-kix_dwfqqvxn75qx-6>li:before{content:"\0025cf  "}ul.lst-kix_ac8rt1a0rbx6-5{list-style-type:none}ul.lst-kix_ac8rt1a0rbx6-4{list-style-type:none}ul.lst-kix_ac8rt1a0rbx6-3{list-style-type:none}ul.lst-kix_ac8rt1a0rbx6-8{list-style-type:none}ul.lst-kix_ac8rt1a0rbx6-7{list-style-type:none}ul.lst-kix_ac8rt1a0rbx6-2{list-style-type:none}.lst-kix_dwfqqvxn75qx-7>li:before{content:"\0025cb  "}.lst-kix_dwfqqvxn75qx-8>li:before{content:"\0025a0  "}ul.lst-kix_ac8rt1a0rbx6-1{list-style-type:none}ul.lst-kix_ac8rt1a0rbx6-0{list-style-type:none}ol{margin:0;padding:0}table td,table th{padding:0}.c14{-webkit-text-decoration-skip:none;color:#3367d6;font-weight:400;text-decoration:underline;vertical-align:baseline;text-decoration-skip-ink:none;font-size:10pt;font-family:"Roboto";font-style:normal}.c15{padding-top:16pt;padding-bottom:4pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c7{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c19{-webkit-text-decoration-skip:none;color:#3367d6;font-weight:400;text-decoration:underline;text-decoration-skip-ink:none;font-size:10pt;font-family:"Roboto"}.c5{background-color:#ffffff;padding-top:0pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c0{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c2{color:#5f6368;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Roboto";font-style:normal}.c1{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c8{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c17{color:#434343;font-weight:400;font-size:14pt;font-family:"Arial"}.c13{color:#000000;font-weight:400;font-size:16pt;font-family:"Arial"}.c9{font-size:10pt;font-family:"Roboto";color:#202124;font-weight:400}.c11{text-decoration:none;vertical-align:baseline;font-style:normal}.c4{background-color:#ffffff;max-width:600pt;}.c3{margin-left:36pt;padding-left:0pt}.c12{padding:0;margin:0}.c10{color:inherit;text-decoration:inherit}.c18{height:11pt}.c16{font-style:italic}.c6{background-color:#ffffff}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style><div class="c4"><h2 class="c7" id="h.xwpo58n7tm42"><span class="c13 c11">Participants</span></h2><ul class="c12 lst-kix_dwfqqvxn75qx-0 start"><li class="c1 c3 li-bullet-0"><span class="c0">Nic Jansma, Mike Henniger, Fergal Daly, Noam Helfman, Alex Jose, Michal Mocny, Pat Meenan, Alex Christensen, Behdad Bakhshinategh, Benjamin De Kosnik, Dan Shappir, Yuzu Saijo, Andy Davies, Giacomo Zecchini, Ian Clelland, Kyle Sharp, Lucas Pardue, Marcel Duran, Nitish Mittal, Timo Tijhof, Boris Schapira</span></li></ul><h2 class="c7" id="h.d5l4tpxf0wvn"><span class="c13 c11">Admin</span></h2><ul class="c12 lst-kix_vnj6ek7m3uqo-0 start"><li class="c1 c3 li-bullet-0"><span class="c0">April 14th 10am PT / 1pm ET</span></li></ul><h2 class="c7" id="h.5xi0uec0wuln"><span class="c13 c11">Minutes</span></h2><h3 class="c15" id="h.e0b71jybnwgp"><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://github.com/rubberyuzu/bfcache-not-retored-reason/blob/main/NotRestoredReason.md&amp;sa=D&amp;source=editors&amp;ust=1649234443268616&amp;usg=AOvVaw0qBQTcWbqExfsEBfvwKEEe">NotRestoredReason API for bfcache</a></span><span>&nbsp;(</span><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://docs.google.com/presentation/d/1VWl1YEIzEkB4vQq3NgtqFc1_zez7e5dMo5bDT7vLGa0/edit%23slide%3Did.g1209aebb9ab_0_33&amp;sa=D&amp;source=editors&amp;ust=1649234443269070&amp;usg=AOvVaw1DZsSs-Zu9KJSCD6vXLE3F">presentation</a></span><span class="c17 c11">)</span></h3><p class="c1"><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://youtu.be/xkWovjs8Wbo&amp;sa=D&amp;source=editors&amp;ust=1649234443269520&amp;usg=AOvVaw3NMgEwyRb4AmVcKJFUDEun">Recording</a></span></p><ul class="c12 lst-kix_w4ahsp7yj95m-0 start"><li class="c1 c3 li-bullet-0"><span class="c0"><b>Yuzu</b><b></b>: BFcache improves performance of history navigation, and it becomes instant</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Freezes the page, and on restore, we resume the page</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Aiming for 50%+ hit rate</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Can't cache all pages at the moment, need websites help to make pages BFCache-eligible</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Proposal helps sites know why they're not getting BFCache'd</span></li><li class="c1 c3 li-bullet-0"><span>... </span><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://github.com/rubberyuzu/bfcache-not-retored-reason/blob/main/NotRestoredReason.md&amp;sa=D&amp;source=editors&amp;ust=1649234443270593&amp;usg=AOvVaw1AcR3USSB6q2_jAJZCGnXO">Explainer</a></span></li><li class="c1 c3 li-bullet-0"><span style="overflow: hidden;<b> display</b><b></b>: inline-block;<b> margin</b><b></b>: 0.00px 0.00px;<b> border</b><b></b>: 0.00px solid #000000;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);<b> width</b><b></b>: 624.00px;<b> height</b><b></b>: 292.00px;"><img alt="" src="./W3C WebPerf Call - March 31 2022_files/pasted image 0.png" style="width: 624.00px;<b> height</b><b></b>: 292.00px; margin-left: 0.00px; margin-top: 0.00px;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Eposes a tree of frames with details about why it was frozen, reasons, etc</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Not exposing cross-origin iframe information - mask cross-origin subtree</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Only report if that subtree is blocking BFCache or not, not the reason or child frames</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Report at point of navigating away from the page, report only the final destination</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Propose to extend the NavigationTiming API</span></li><li class="c1 c3 li-bullet-0"><span style="overflow: hidden;<b> display</b><b></b>: inline-block;<b> margin</b><b></b>: 0.00px 0.00px;<b> border</b><b></b>: 0.00px solid #000000;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);<b> width</b><b></b>: 624.00px;<b> height</b><b></b>: 322.67px;"><img alt="" src="./W3C WebPerf Call - March 31 2022_files/pasted image 0(1).png" style="width: 624.00px;<b> height</b><b></b>: 322.67px; margin-left: 0.00px; margin-top: 0.00px;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c1 c3 li-bullet-0"><span class="c0">... For same-sites:</span></li><li class="c1 c3 li-bullet-0"><span style="overflow: hidden;<b> display</b><b></b>: inline-block;<b> margin</b><b></b>: 0.00px 0.00px;<b> border</b><b></b>: 0.00px solid #000000;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);<b> width</b><b></b>: 624.00px;<b> height</b><b></b>: 314.67px;"><img alt="" src="./W3C WebPerf Call - March 31 2022_files/pasted image 0(2).png" style="width: 624.00px;<b> height</b><b></b>: 314.67px; margin-left: 0.00px; margin-top: 0.00px;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Cross-site example:</span></li><li class="c1 c3 li-bullet-0"><span style="overflow: hidden;<b> display</b><b></b>: inline-block;<b> margin</b><b></b>: 0.00px 0.00px;<b> border</b><b></b>: 0.00px solid #000000;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);<b> width</b><b></b>: 624.00px;<b> height</b><b></b>: 308.00px;"><img alt="" src="./W3C WebPerf Call - March 31 2022_files/pasted image 0(3).png" style="width: 624.00px;<b> height</b><b></b>: 308.00px; margin-left: 0.00px; margin-top: 0.00px;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c1 c3 li-bullet-0"><span class="c0">... URL, reasons, children are empty</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... A point to discuss is whether or not we should standardize "reasons"</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... If we don't, it could confuse developers</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Allow adding browser specific details after the standardized name</span></li><li class="c1 c3 li-bullet-0"><span style="overflow: hidden;<b> display</b><b></b>: inline-block;<b> margin</b><b></b>: 0.00px 0.00px;<b> border</b><b></b>: 0.00px solid #000000;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);<b> width</b><b></b>: 624.00px;<b> height</b><b></b>: 238.67px;"><img alt="" src="./W3C WebPerf Call - March 31 2022_files/pasted image 0(4).png" style="width: 624.00px;<b> height</b><b></b>: 238.67px; margin-left: 0.00px; margin-top: 0.00px;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c1 c3 li-bullet-0"><span class="c0">[end of the presentation]</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Benjamin</b><b></b>: Do you have a list of reasons that you've found so far?</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Yuzu</b><b></b>: Yes, we expose the blocking reasons on the Dev Tools, and I think we're going to expose the same set of reasons</span></li><li class="c1 c3 li-bullet-0"><span>... </span><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://docs.google.com/spreadsheets/d/1li0po_ETJAIybpaSX5rW_lUN62upQhY0tH4pR5UPt60/edit%23gid%3D0&amp;sa=D&amp;source=editors&amp;ust=1649234443273293&amp;usg=AOvVaw3ZzOoU48GZr-WVo_O7pRL0">Chromium reasons</a></span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Yoav</b><b></b>: From HTML spec perspective, are those reasons all in the spec as things that should prevent browsers from putting things in BFCache, or are some things that we're still trying to get over but are just an implementation limitation in Chromium?</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Fergal</b><b></b>: At the moment, it's a mix of both. &nbsp;HTML spec doesn't have many cases that it says are not cacheable.</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... WebLocks, for example, if you're holding a lock, then no one else can take the lock</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... I don't think the spec mentions that right now</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... And then there's a bunch of things, where, in order to get out the door, we've blocked BFCache for a number of reasons but we haven't yet gotten around to fixing them</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Noam H</b><b></b>: Understand that you propose to add a property to PerformanceNavigationTiming entry right, and this would be specific to BFCache entry types?</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Are we concerned we're expanding structure where it's only appropriate to one type, or we are expanding it to other types too?</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Yuzu</b><b></b>: I think that concern is valid, we're thinking it's fine, but I don't know</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Noam</b><b></b>: Not first one that's exposed just for specific types of entries. &nbsp;Is there another structure we can expose that's more generic?</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Fergal</b><b></b>: No one on our team in BFCache world is involved in this structure, so if anyone has opinions on it, we can talk about it</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Yoav</b><b></b>: Third item on agenda is for pre-render cases where we're talking about adding an activationStart attribute to NavTiming entries. &nbsp;Might be worthwhile to look at API shape more holistically, shape it differently?</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... I think NavigationTiming entries is the right place for this, we don't need a separate entry</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... But maybe we can compartmentalize for data that's specific to only specific navigation types</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Noam</b><b></b>: Maybe a property that holds navigation-type contexts</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Yoav</b><b></b>: Or having type-specific information in an attribute below the top type</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Timo</b><b></b>: Main thing that came to mind is potential size, for RUM collectors who serialize objects blindly on server-side. &nbsp;Is that the concern?</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Noam</b><b></b>: I did not think about that concern, but it's valid. &nbsp;It was mainly about API structure and ergonomics.</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Dan</b><b></b>: My question is when will the list be known or known to be complete? &nbsp;Things can be added or removed from preventing BFCache dynamically, so when should this property be queried?</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Yuzu</b><b></b>: When clicking back or forward button we know, the state should be final. &nbsp;We should have a complete list of reasons.</span></li><li class="c1 c3 li-bullet-0"><span><b>Dan</b><b></b>: I need to wait until I am </span><span class="c16">not</span><span class="c0">&nbsp;restored from BFCache and then report it?</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Yuzu</b><b></b>: Yes</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Dan</b><b></b>: I think that should be emphasized. &nbsp;Wondering if there was a way to query for reasons why I wouldn't be BFCache-able.</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Michal</b><b></b>: I think you could do that locally with lab testing, audit button. &nbsp;Not sure if there would be differences in the field</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Another, I think it's convenient to list all trees, but could it just be a summary for all things in the tree? &nbsp;Or is it necessary to have the full tree with perfect annotation? &nbsp;Can it be reduced to a core of most-necessary information?</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Yuzu</b><b></b>: In Dev Tools we reported only the flattened list of reasons, hard to know which frame was causing it.</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Michal</b><b></b>: I know for local testing that can be frustrating, but in RUM data are you just looking for patterns.</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Yoav</b><b></b>: Advantage from getting that data in the field is you can know which 3P to point fingers at.</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Agreed that tree structure is a bit unusual in previous things we've done.,</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Fergal</b><b></b>: Is the concern around the size of the tree?</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Michal</b><b></b>: You want it to be simple, but no simpler. &nbsp;Maybe just saying collectively these things are happening so take care of it. &nbsp;Or some shortened list.</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Makes total sense to me in dev tools when you click that button you want perfect information</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Pat</b><b></b>: Maybe it... (example that was too long to log, sorry Pat!)</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Fergal</b><b></b>: Idea of reaching into frames to get more information from them, that's problematic when going cross-origin. &nbsp;We'd have to be careful if we tried.</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... A bigger blocker: You might be blocked by an iframe that's not there when you come back, dynamic IFRAME may not be there, so you can't reach into it.</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Alex</b><b></b>: With regards to standardizing a list of reasons, over the years we've done a number of pushes to reduce the number of reasons, and occasionally we've added reasons. &nbsp;So in my view that list should be somewhat dynamic and be available to add things before we release.</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... But I am onboard with standardizing things</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Fergal</b><b></b>: In the Github issue where it was raised, he suggests a PR that should always be accepted.</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Yoav</b><b></b>: Even if there's only one implementer with this specific reason, that's OK</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Dan</b><b></b>: Reference something that Michal mentioned before about the importance of getting data from the field, often this is about 3P scripts added via tag manager.</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Developer may not have info about what's added</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... E.g. fbevents.js has an unload handler, and I assume that affects a lot of websites</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Value getting from field and not just lab conditions</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Yoav</b><b></b>: 3P scripts are added to the top-level frame. &nbsp;Current API will surface that "unload" is added, but not which script added it</span></li><li class="c1 c3 li-bullet-0"><span><b>Dan</b><b></b>: Knowing is great, being able to know </span><span class="c16">which</span><span class="c0">&nbsp;3P script is better</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Especially if it allows cross-origin, assuming it's doable</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Fergal</b><b></b>: We've reached out to a lot of 3P libraries recently, should be improvements soon</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Not sure what stage of rollout is, but I'm told it's gone</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Andy</b><b></b>: From a RUM point of view, we'd like to start with the simplest implementation possible. &nbsp;Whether a page is restricted from BFCache, and get into reasons later down the road.</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Nic</b><b></b>: To Michal’s point, with LongTasks we have a vague reason RE the reasoning, and it’s not as useful - it hints at the problem but not more. Leaning towards providing as much info as possible. As a RUM provider I can trim that list of reasons down and like having an option for that. Would be more flexible. Our customers want to know what to do next when we point out a problem.</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Timo</b><b></b>: Was there new information exposed by cross-origin things? &nbsp;I think all the info is already inferable today.</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Yuzu</b><b></b>: We've had a security review, and we don't believe we're exposing something new.</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Fergal</b><b></b>: Last thing, is we're going to start implementing soon, so might be looking for an Origin Trial partner</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Yoav</b><b></b>: That would also include 3P origin trials (RUM vendors)</span></li></ul><h3 class="c15" id="h.bvu450wrypu7"><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://discourse.wicg.io/t/proposal-stateful-javascript-page-unload-beacon-api/5776&amp;sa=D&amp;source=editors&amp;ust=1649234443279740&amp;usg=AOvVaw1tISzmUUkQhFYLHGYHQ2Bx">Unload beacon proposal</a></span><span>&nbsp;- Fergal (</span><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://docs.google.com/presentation/d/1YhipvqyWYuYFxN3T0cLGsmXKMXUssdv_CM-4hwnjy0s/edit%23slide%3Did.gfb1a0287e1_0_33&amp;sa=D&amp;source=editors&amp;ust=1649234443280261&amp;usg=AOvVaw0Y5Z0eJHlnFD7tXrvvojdr">presentation</a></span><span class="c11 c17">)</span></h3><p class="c1"><span class="c8"><a class="c10" href="https://www.google.com/url?q=https://www.youtube.com/watch?v%3DKian2FpoPIU&amp;sa=D&amp;source=editors&amp;ust=1649234443280809&amp;usg=AOvVaw1fY5i3upqwZ6MBDvMm7Whj">recording</a></span></p><ul class="c12 lst-kix_23mgtg714wo0-0 start"><li class="c1 c3 li-bullet-0"><span class="c0"><b>Fergal</b><b></b>: Work with Yuzu as well and in BFCache</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Unload is a big enemy of BFCache, so if we can provide APIs that allow people to stop using Unload that could help</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Proposal, that we're starting to implement</span></li><li class="c1 c3 li-bullet-0"><span style="overflow: hidden;<b> display</b><b></b>: inline-block;<b> margin</b><b></b>: 0.00px 0.00px;<b> border</b><b></b>: 0.00px solid #000000;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);<b> width</b><b></b>: 624.00px;<b> height</b><b></b>: 242.67px;"><img alt="" src="./W3C WebPerf Call - March 31 2022_files/pasted image 0(5).png" style="width: 624.00px;<b> height</b><b></b>: 242.67px; margin-left: 0.00px; margin-top: 0.00px;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Problem of beacons that people want to send reliably at the end of the page.</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... For example, CLS or other full-page performance metrics with data that's better to accumulate over the lifetime rather than sending throughout</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Not a good time to send, events not reliable</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Existing transports have reliability issues, navigator.sendBeacon() not always guaranteeing to deliver something</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... If you really care about data but not user/battery life, you can beacon continuously, but sort it out on the back-end. &nbsp;Bad for everyone.</span></li><li class="c1 c3 li-bullet-0"><span class="c0">.... What someone could do already if they wanted to, thinking if we're adding new risks to platform</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Proposal is to allow pages set data for a beacon, and browser ensure it gets sent</span></li><li class="c1 c3 li-bullet-0"><span style="overflow: hidden;<b> display</b><b></b>: inline-block;<b> margin</b><b></b>: 0.00px 0.00px;<b> border</b><b></b>: 0.00px solid #000000;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);<b> width</b><b></b>: 359.00px;<b> height</b><b></b>: 196.00px;"><img alt="" src="./W3C WebPerf Call - March 31 2022_files/pasted image 0(6).png" style="width: 359.00px;<b> height</b><b></b>: 196.00px; margin-left: 0.00px; margin-top: 0.00px;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Timing is after page is gone</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Example:</span></li><li class="c1 c3 li-bullet-0"><span style="overflow: hidden;<b> display</b><b></b>: inline-block;<b> margin</b><b></b>: 0.00px 0.00px;<b> border</b><b></b>: 0.00px solid #000000;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);<b> width</b><b></b>: 624.00px;<b> height</b><b></b>: 144.00px;"><img alt="" src="./W3C WebPerf Call - March 31 2022_files/pasted image 0(7).png" style="width: 624.00px;<b> height</b><b></b>: 144.00px; margin-left: 0.00px; margin-top: 0.00px;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Script loses reference to the object it just creates, it can't do anything about it, after the page is being unloaded. &nbsp;If the page goes into BFCache and times out, we'll still send it.</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... If page crashes, we plan to still send data after crash</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Example 2</span></li><li class="c1 c3 li-bullet-0"><span style="overflow: hidden;<b> display</b><b></b>: inline-block;<b> margin</b><b></b>: 0.00px 0.00px;<b> border</b><b></b>: 0.00px solid #000000;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);<b> width</b><b></b>: 624.00px;<b> height</b><b></b>: 320.00px;"><img alt="" src="./W3C WebPerf Call - March 31 2022_files/pasted image 0(8).png" style="width: 624.00px;<b> height</b><b></b>: 320.00px; margin-left: 0.00px; margin-top: 0.00px;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c1 c3 li-bullet-0"><span class="c0">... always keeping the beacon up to date (e.g. CLS), if you do nothing else, when the page goes away, it'll send your data.</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... or you can stop it.</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... full API:</span></li><li class="c1 c3 li-bullet-0"><span style="overflow: hidden;<b> display</b><b></b>: inline-block;<b> margin</b><b></b>: 0.00px 0.00px;<b> border</b><b></b>: 0.00px solid #000000;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);<b> width</b><b></b>: 332.00px;<b> height</b><b></b>: 361.00px;"><img alt="" src="./W3C WebPerf Call - March 31 2022_files/pasted image 0(9).png" style="width: 332.00px;<b> height</b><b></b>: 361.00px; margin-left: 0.00px; margin-top: 0.00px;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c1 c3 li-bullet-0"><span class="c0">... pageHideTimeout specifies that browser should send beacon after page goes into hide, and people may not want beacons coming in 45m after page has gone into BFCache</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... state gets updated after being sent, failures, after sendNow(), etc</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Extensions should be able to block these just like any other network request. &nbsp;How we're going to do that is a bit tricky, as extensions might be surprised in some states of the page</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... If an extension blocks a beacon, should the page know and how?</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Surviving crashes and restarts, if the render process crashes, the browser process is still alive and can send the data.</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... But if Chrome is closed, it's not possible to send all beacons, so we'd send on restart</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... If we survive across restarts, it might be a different network on restart, same issue as with Reporting API</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Only thing that's different from a page beaconing all the time, for example</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Couple questions:</span></li><li class="c1 c3 li-bullet-0"><span style="overflow: hidden;<b> display</b><b></b>: inline-block;<b> margin</b><b></b>: 0.00px 0.00px;<b> border</b><b></b>: 0.00px solid #000000;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);<b> width</b><b></b>: 395.00px;<b> height</b><b></b>: 158.00px;"><img alt="" src="./W3C WebPerf Call - March 31 2022_files/pasted image 0(10).png" style="width: 395.00px;<b> height</b><b></b>: 158.00px; margin-left: 0.00px; margin-top: 0.00px;<b> transform</b><b></b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Nic</b><b></b>: Excited about this proposal - would solve a lot of problems</span></li><li class="c1 c3 li-bullet-0"><span class="c0">… question about the pageHideTimeout, would it apply after restarts RE how long it took for chrome to restart</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Fergal</b><b></b>: If the page came out of BFCache before the timeout, I’m not sure if that results in a send. Needs to be clarified</span></li><li class="c1 c3 li-bullet-0"><span class="c0">… Do we need a timeout “send this when the page is done or in a few minutes?”</span></li><li class="c1 c3 li-bullet-0"><span class="c0">… Basically how long you wait before sending it. Data that you want to send in a certain time frame</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Nic</b><b></b>: I’m not looking for a timeout but a max age - “don’t send it because it’s been 10 minutes and we don’t care”</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Michal</b><b></b>: Is this a timeout for when the page is still in the foreground?</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Fergal</b><b></b>: yeah, “just send this in 2 minutes”</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Pat</b><b></b>: Feels like the API surface allowing the sending allows pages to set timeouts on their own. Max age feels like a better one, once the page is no longer in control</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Nic</b><b></b>: Either a max age or a timestamp when the data is queued that would allow server filtering</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Fergal</b><b></b>: Added a parameter at some point, but now it’s a blob, so people can add that themselves</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Dan</b><b></b>: What I often see with people using unload, is a flush operation</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Going back to fbevents.js, they flush all events that they've collected</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... API should be designed with that in mind</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... If the approach is don't send anything and we'll send it once the page is closed</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Or if there's a mode where you can periodically flush the sending and you can also flush at the end</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Second point is that every time you're setting data, you're accumulating data, is there a concern around the amount</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Dan</b><b></b>: We're just replacing the data, not accumulating.</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Let's say there are two scripts with an unload event, they would each contain their own data and control it</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Dan</b><b></b>: If it's replaced, consider using API called replaceData() -- wasn't clear that setData() replaces it instead of accumulates it</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Marcel</b><b></b>: My question is with regards to retry, are we considering a retry when a user is offline and returns online. &nbsp;Not necessarily crashing. &nbsp;For mobile.</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Fergal</b><b></b>: I think the network stack would know it's offline and not try in the first place</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... We haven't talked much about replies, if we don't get a 200 from the server when we deliver it, should we try again?</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Maybe make that customizable</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Patrick</b><b></b>: Feels like it should behave like Network Error Logging</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Marcel</b><b></b>: Retry is something I usually control by myself with backoff etc, but it would be nice if it handled it on its own, with some controls, etc</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Yoav</b><b></b>: In the cases you care about, you can't implement your own retry here</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Patrick</b><b></b>: For CSP, NEL reports, anything browser sends on behalf of page but not in context of page, the same retry should be used. &nbsp;Automatic way that the site shouldn't care about</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Fergal</b><b></b>: Being consistent with them would make sense</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Particularly for the unload replacement, they're using sendBeacon() or a keepalive fetch(), and you're not going to be able to control the retry behavior on those, so we're not making anything worse in that case</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Michal</b><b></b>: I know from Chrome's own implementation for when we decide to beacon, when there's an unexpected crash and you retry when coming back. &nbsp;But another thing is we try to beacon early, where we share the sentiment that a single beacon is valuable, and we don't want to wait for the next time it's available.</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Wonder if retry beacon on crash, is there a per-policy beacon where I can request it gets sent on hide</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Yoav</b><b></b>: It's possible that the onstatechange proposal, if the browser decided to send before it was destroyed, script could understand that and it could send more data in the future</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Michal</b><b></b>: But this is when the browser is destroyed</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Yoav</b><b></b>: In that case you did the right thing. &nbsp;If you sent early and it wasn't destroyed, you want the developer to know that.</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Michal</b><b></b>: Specific case: You hit Home on Chrome, the renderer is not closed, the app might be back into foreground, it's not unloaded or in bfcache. &nbsp;That is the perfect scenario.</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Alternatively after Home, Android cleans up the tab, now you have to set that in persistence state, but that could be a while where beacons are lost. &nbsp;Ask to eagerly send beacons before unload.</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Fergal</b><b></b>: You can do it a bit in the page itself, visibility change, where you're the page on top. &nbsp;Other cases where e.g. Android pauses, and it has all these beacons it sends.</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Michal</b><b></b>: Worried on just visibility changes, too quick. &nbsp;Is there another event where you get an event that indicates you're very likely to get unloaded, e.g. tab switcher.</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Fergal</b><b></b>: If browser is getting killed, it's unlikely it's going to be able to send all beacons</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... If we offer policy choice from page?</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Michal</b><b></b>: I prefer the API to have control over when to send. &nbsp;And the simple default could be when to beacon to have as much coverage as possible. &nbsp;But does the other use-case need treatment?</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Katie</b><b></b>: &nbsp;One of the really common use-cases for unload sending beacons, we want to track the link the user clicked on. &nbsp;If the setData() is a full-replace, if I'm a RUM provider I'll keep an object in memory and periodically call setData() to replace it.</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Is there a race condition where I want to grab this data from page context memory and move it over to the beacon, will that get cancelled?</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... We might end up in situations where we want to update it at the right of the end of the user session, but we can't because the page is unloading</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Fergal</b><b></b>: You could also create a new beacon where you put that information into</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Hopefully network stack will send in one connection</span></li><li class="c1 c3 li-bullet-0"><span class="c0">... Don't think there's a concern there</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Ian</b><b></b>: Wanted to point out there used to be a lot of complexity in the Reporting API around max-age, etc. &nbsp;We pulled a lot of that out around concerns around implementability, etc. &nbsp;Wondering if other browser vendors are willing.</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Nic</b><b></b>: only concern is using setdata for updating would result in 2 copies of the data. Maybe we can have a reference and dedup the data?</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Timo</b><b></b>: The idea that the browser stores the data offline makes me offline. That seems contrary to user expectation, so a max expiration would make me more comfortable, basically to have an upper limit on that.</span></li><li class="c1 c3 li-bullet-0"><span class="c0"><b>Fergal</b><b></b>: At the worst case a site can continuously beacon, so sending it eventually doesn’t seem worse, but we probably don’t want to keep them for weeks</span></li></ul><p class="c1 c18"><span class="c0"></span></p><p class="c1 c18"><span class="c0"></span></p><h2 class="c7" id="h.fdo2q3x3xxss"><span class="c11 c13">Chat Log</span></h2><p class="c1 c6"><span class="c9">Michal Mocny</span><span class="c2">11:02 AM</span></p><p class="c5"><span class="c9 c11">Recording?</span></p><p class="c1 c6"><span class="c9">Yuzu Saijo</span><span class="c2">11:11 AM</span></p><p class="c5"><span class="c19"><a class="c10" href="https://www.google.com/url?q=https://docs.google.com/spreadsheets/d/1li0po_ETJAIybpaSX5rW_lUN62upQhY0tH4pR5UPt60/edit%23gid%3D0&amp;sa=D&amp;source=editors&amp;ust=1649234443289668&amp;usg=AOvVaw34V42y0-SMeLlXYFN9lDlN">https://docs.google.com/spreadsheets/d/1li0po_ETJAIybpaSX5rW_lUN62upQhY0tH4pR5UPt60/edit#gid=0</a></span></p><p class="c1 c6"><span class="c9">Benjamin De Kosnik</span><span class="c2">11:13 AM</span></p><p class="c5"><span class="c9 c11">thanks Yuzu</span></p><p class="c1 c6"><span class="c9">Yuzu Saijo</span><span class="c2">11:13 AM</span></p><p class="c5"><span class="c9">slides:</span><span class="c9"><a class="c10" href="https://www.google.com/url?q=https://docs.google.com/presentation/d/1VWl1YEIzEkB4vQq3NgtqFc1_zez7e5dMo5bDT7vLGa0/edit%23slide%3Did.g1209aebb9ab_0_33&amp;sa=D&amp;source=editors&amp;ust=1649234443290457&amp;usg=AOvVaw3kB-91yKDddNwg6ZfM_UVa">&nbsp;</a></span><span class="c19"><a class="c10" href="https://www.google.com/url?q=https://docs.google.com/presentation/d/1VWl1YEIzEkB4vQq3NgtqFc1_zez7e5dMo5bDT7vLGa0/edit%23slide%3Did.g1209aebb9ab_0_33&amp;sa=D&amp;source=editors&amp;ust=1649234443290783&amp;usg=AOvVaw0NphX-SQSkM_NkKQ7sTlKs">https://docs.google.com/presentation/d/1VWl1YEIzEkB4vQq3NgtqFc1_zez7e5dMo5bDT7vLGa0/edit#slide=id.g1209aebb9ab_0_33</a></span></p><p class="c1 c6"><span class="c9">Michal Mocny</span><span class="c2">11:16 AM</span></p><p class="c5"><span class="c9 c11">"options" bucket like measures v3?</span></p><p class="c1 c6"><span class="c9">Timo Tijhof</span><span class="c2">11:22 AM</span></p><p class="c5"><span class="c9 c11">privacy/security; not unlike what we have with event timing and input delay attribution etc.</span></p><p class="c5"><span class="c9 c11">element timing*</span></p><p class="c1 c6"><span class="c9">Katie Sylor-Miller</span><span class="c2">11:24 AM</span></p><p class="c5"><span class="c9 c11">+1 to Fergal's point, it's important to note that a lot of times iframes are cross-origin and inserted via things like GTM and not under direct control</span></p><p class="c1 c6"><span class="c9">Katie Sylor-Miller</span><span class="c2">11:27 AM</span></p><p class="c5"><span class="c9 c11">+1</span></p><p class="c1 c6"><span class="c9">Michal Mocny</span><span class="c2">11:45 AM</span></p><p class="c5"><span class="c9 c11">setTimeout(beacon.sendNow, 2000)</span></p><p class="c1 c6"><span class="c9">Michal Mocny</span><span class="c2">11:48 AM</span></p><p class="c5"><span class="c9 c11">I like set, same as Map</span></p><p class="c1 c6"><span class="c9">Timo Tijhof</span><span class="c2">11:48 AM</span></p><p class="c5"><span class="c9 c11">yeah, setData would be clearer than addData.</span></p><p class="c1 c6"><span class="c9">Michal Mocny</span><span class="c2">11:49 AM</span></p><p class="c5"><span class="c9 c11">beacon.data = ... vs .setData(...) maybe</span></p><p class="c1 c6"><span class="c9">Noam Helfman</span><span class="c2">11:49 AM</span></p><p class="c5"><span class="c9 c11">how about setDate(key, value)? This will allow simpler control of the state instead of managing it outside the beacon object.</span></p><p class="c1 c6"><span class="c9">Michal Mocny</span><span class="c2">11:58 AM</span></p><p class="c5"><span class="c9 c11">(Or Noams idea, to just add one key.. though I'm not sure if beacons are a map like that)</span></p><p class="c1 c6"><span class="c9">Kyle Sharp</span><span class="c2">11:59 AM</span></p><p class="c5"><span class="c9 c11">Have to drop. Super interesting discussions, thanks everybody!</span></p><p class="c1 c6"><span class="c9">Katie Sylor-Miller</span><span class="c2">11:59 AM</span></p><p class="c5"><span class="c9 c11">we do usually send beacons as a key value store yes</span></p><p class="c5"><span class="c9 c11">weakmap?</span></p><p class="c1 c6"><span class="c9">Michal Mocny</span><span class="c2">12:01 PM</span></p><p class="c5"><span class="c9 c11">expiry will be ergonomically useful even for the beacon receiver</span></p><p class="c1 c18"><span class="c0"></span></p></div></div><script type="text/javascript" nonce="">(function(){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
function k(){return function(){}}var aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ba="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
function ca(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var da=ca(this);function ea(a,b){if(b)a:{var c=da;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ba(c,a,{configurable:!0,writable:!0,value:b})}}var l;
if("function"==typeof Object.setPrototypeOf)l=Object.setPrototypeOf;else{var m;a:{var fa={a:!0},ha={};try{ha.__proto__=fa;m=ha.a;break a}catch(a){}m=!1}l=m?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ia=l;
function n(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(ia)ia(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.m=b.prototype}ea("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}});
ea("Array.prototype.find",function(a){return a?a:function(b,c){a:{var d=this;d instanceof String&&(d=String(d));for(var e=d.length,f=0;f<e;f++){var g=d[f];if(b.call(c,g,f,d)){b=g;break a}}b=void 0}return b}});var p=this||self;function q(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ja(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}
function ka(a,b){function c(){}c.prototype=b.prototype;a.m=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.D=function(d,e,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[e].apply(d,g)}}function r(a){return a};function t(a){t[" "](a);return a}t[" "]=k();function la(a,b,c){return Object.prototype.hasOwnProperty.call(a,b)?a[b]:a[b]=c(b)};function ma(a){return la(a.prototype,"$$generatedClassName",function(){return"Class$obf_"+{valueOf:function(){return++na}}})}var na=1E3;function u(){}u.prototype.s=function(){return this.j||(Object.defineProperties(this,{j:{value:oa=oa+1|0,enumerable:!1}}),this.j)};u.prototype.toString=function(){var a=w(x(pa(this.constructor)))+"@";var b=(this.s()>>>0).toString(16);return a+w(b)};function y(){}n(y,u);y.prototype.h=function(a){this.g=a;if(a instanceof Object)try{a.v=this}catch(b){}};function qa(a){a.g instanceof Error&&(Error.captureStackTrace?Error.captureStackTrace(a.g):a.g.stack=Error().stack)}y.prototype.toString=function(){var a=x(pa(this.constructor)),b=this.l;return null==b?a:w(a)+": "+w(b)};
function ra(a){if(null!=a){var b=a.v;if(null!=b)return b}a instanceof TypeError?(b=new sa,b.l=w(a),qa(b),b.i=a,b.h(new TypeError(b)),a=b):(b=new z,b.l=w(a),qa(b),b.i=a,b.h(Error(b)),a=b);return a};function A(){}n(A,y);function B(){}n(B,A);function z(){}n(z,B);z.prototype.h=function(a){B.prototype.h.call(this,"__noinit__"===this.i?a:this.i)};function sa(){}n(sa,z);var oa=0;function ta(a,b){return"string"==typeof a?a.charCodeAt(b):a.g(b)};function C(){}var ua,va;n(C,u);function wa(){wa=k();va=new D;ua=new E};function D(){}n(D,C);D.prototype.toString=function(){return""};function E(){}n(E,C);E.prototype.toString=function(){return"unknown"};function w(a){return null==a?"null":a.toString()}function xa(a){return 65536<=a?w(String.fromCharCode((55296+((a-65536|0)>>10&1023)|0)&65535))+w(String.fromCharCode((56320+((a-65536|0)&1023)|0)&65535)):String.fromCharCode(a&65535)}function ya(a,b){var c=b,d=a.length,e;b=ta(a,(e=c,c=c+1|0,e));var f;if(e=55296<=b&&56319>=b&&c<d)a=f=ta(a,c),e=56320<=a&&57343>=a;var g;e?g=65536+((b&1023)<<10)+(f&1023)|0:g=b;return g};function F(a,b){this.g=a;this.h=b}n(F,u);function x(a){if(0!=a.h){var b="L"+w(ma(a.g))+";";a=a.h;for(var c="",d=0;d<a;d=d+1|0)c=w(c)+"[";return w(c)+w(b)}return ma(a.g)}F.prototype.toString=function(){return"class "+w(x(this))};function pa(a){return la(a.prototype,"$$class/0",function(){return new F(a,0)})};function za(a){var b=a;try{var c;if(c="www.google.com"===Aa(a)){var d=Ba(a)[5];c="/url"===G(d,!0)}if(c){var e=Ca(a,"q");b=e?e:Ca(a,"url")}}catch(f){if(f=ra(f),!(f instanceof A))throw f.g;}return null!=b?b:""};function G(a,b){return null==a?a:b?decodeURI(a):decodeURIComponent(a)};var Da;function Ba(a){H();a=Da.exec(a);for(var b=[],c=0;7>=c;c=c+1|0)a.length<=c||null==a[c]?b.push(null):b.push(a[c]);return b}function Aa(a){a=Ba(a);return G(a[3],!0)}
function Ca(a,b){H();var c=a.indexOf(xa(35));c=0>c?a.length:c;a:{var d=0;for(var e=b.length;0<(d=a.indexOf(b,d))&&d<c;){var f=ya(a,d-1|0);if(38==f||63==f){if((d+e|0)>=a.length)break a;f=ya(a,d+e|0);if(61==f||38==f||35==f)break a}d=d+(e+1)|0}d=-1}if(0>d)return null;e=a.indexOf(xa(38),d);if(0>e||e>c)e=c;d=d+(b.length+1)|0;b=Math.min(a.length,d);a=a.substr(b,Math.min(a.length,Math.max(d,e))-b|0);c=" ";for(b=0;0<=(b=c.indexOf("\\",b));)36==c.charCodeAt(b+1|0)?(d=w(c.substr(0,b|0))+"$",e=b=b+1|0,c=d+w(c.substr(e))):
(d=w(c.substr(0,b|0)),e=b=b+1|0,c=d+w(c.substr(e)));a=a.replace(RegExp("\\+","g"),c);return G(a,!1)}function H(){H=k();Da=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\S\\s]*))?$")};function Ea(){Ea=k();Fa||Ga()};var Ha=/&/g,Ia=/</g,Ja=/>/g,Ka=/"/g,La=/'/g,Ma=/\x00/g,Na=/[\x00&<>"']/;var Oa=null,I;I=null;function J(){var a;if(null==Oa)a:{if(a=p.navigator)if(a=a.userAgent)break a;a=""}else a=Oa;return a}function K(a){return-1!=J().indexOf(a)};function Pa(){var a=I;return!!a&&0<a.brands.length}function Qa(a){a.forEach(k())}function Ra(){for(var a=J(),b=RegExp("([A-Z][\\w ]+)/([^\\s]+)\\s*(?:\\((.*?)\\))?","g"),c=[],d;d=b.exec(a);)c.push([d[1],d[2],d[3]||void 0]);Qa(c)}function Ga(){Pa()?I.brands.find(function(a){return"Firefox"===a.brand}):Ra()};var Sa=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"===typeof a)return"string"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};var Ta=Pa()?!1:K("Trident")||K("MSIE"),Ua=K("Edge")||Ta,Va=K("Gecko")&&!(-1!=J().toLowerCase().indexOf("webkit")&&!K("Edge"))&&!(K("Trident")||K("MSIE"))&&!K("Edge"),Fa=-1!=J().toLowerCase().indexOf("webkit")&&!K("Edge"),Wa=I,Xa=Wa&&Wa.platform?"macOS"===I.platform:K("Macintosh");function Ya(a){a&&"function"==typeof a.u&&a.u()};function L(){this.h=this.h;this.g=this.g}L.prototype.h=!1;L.prototype.u=function(){this.h||(this.h=!0,this.j())};L.prototype.j=function(){if(this.g)for(;this.g.length;)this.g.shift()()};function Za(a,b,c){for(var d in a)b.call(c,a[d],d,a)};var M;function N(a,b){this.i=a===$a&&b||"";this.j=ab}N.prototype.h=!0;N.prototype.g=function(){return this.i};var ab={},$a={};function O(a,b){this.i=b===P?a:""}O.prototype.h=!0;O.prototype.g=function(){return this.i.toString()};O.prototype.toString=function(){return this.i.toString()};function Q(a){return a instanceof O&&a.constructor===O?a.i:"type_error:SafeUrl"}var bb=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,cb=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function db(a){if(a instanceof O)return a;a="object"==typeof a&&a.h?a.g():String(a);cb.test(a)||(a="about:invalid#zClosurez");return new O(a,P)}
var P={},eb=new O("about:invalid#zClosurez",P);var fb={};function R(a,b,c){this.i=c===fb?a:"";this.h=!0}R.prototype.g=function(){return this.i.toString()};R.prototype.toString=function(){return this.i.toString()};function gb(a,b,c,d){a=a instanceof O?a:db(a);b=b||p;c=c instanceof N?c instanceof N&&c.constructor===N&&c.j===ab?c.i:"type_error:Const":c||"";return void 0!==d?b.open(Q(a),c,d):b.open(Q(a),c)};function S(a,b){this.type=a;this.target=b;this.i=!1}S.prototype.g=function(){this.i=!0};var hb=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{p.addEventListener("test",k(),b),p.removeEventListener("test",k(),b)}catch(c){}return a}();function T(a){S.call(this,a?a.type:"");this.relatedTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.pointerId=0;this.pointerType="";this.h=null;if(a){var b=this.type=a.type,c=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;var d=a.relatedTarget;if(d){if(Va){a:{try{t(d.nodeName);var e=!0;break a}catch(f){}e=!1}e||(d=null)}}else"mouseover"==
b?d=a.fromElement:"mouseout"==b&&(d=a.toElement);this.relatedTarget=d;c?(this.clientX=void 0!==c.clientX?c.clientX:c.pageX,this.clientY=void 0!==c.clientY?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=
a.metaKey;this.pointerId=a.pointerId||0;this.pointerType="string"===typeof a.pointerType?a.pointerType:ib[a.pointerType]||"";this.state=a.state;this.h=a;a.defaultPrevented&&T.m.g.call(this)}}ka(T,S);var ib={2:"touch",3:"pen",4:"mouse"};T.prototype.g=function(){T.m.g.call(this);var a=this.h;a.preventDefault?a.preventDefault():a.returnValue=!1};var U="closure_listenable_"+(1E6*Math.random()|0);var jb=0;function kb(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.h=e;this.key=++jb;this.g=this.o=!1}function lb(a){a.g=!0;a.listener=null;a.proxy=null;a.src=null;a.h=null};function V(a){this.src=a;this.g={};this.h=0}V.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.g[f];a||(a=this.g[f]=[],this.h++);var g;a:{for(g=0;g<a.length;++g){var h=a[g];if(!h.g&&h.listener==b&&h.capture==!!d&&h.h==e)break a}g=-1}-1<g?(b=a[g],c||(b.o=!1)):(b=new kb(b,this.src,f,!!d,e),b.o=c,a.push(b));return b};var mb="closure_lm_"+(1E6*Math.random()|0),nb={},ob=0;function pb(a,b,c,d,e){if(d&&d.once)return qb(a,b,c,d,e);if(Array.isArray(b)){for(var f=0;f<b.length;f++)pb(a,b[f],c,d,e);return null}c=rb(c);return a&&a[U]?a.g(b,c,q(d)?!!d.capture:!!d,e):sb(a,b,c,!1,d,e)}
function sb(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=q(e)?!!e.capture:!!e,h=tb(a);h||(a[mb]=h=new V(a));c=h.add(b,c,d,g,f);if(c.proxy)return c;d=ub();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)hb||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(vb(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");ob++;return c}
function ub(){function a(c){return b.call(a.src,a.listener,c)}var b=wb;return a}function qb(a,b,c,d,e){if(Array.isArray(b)){for(var f=0;f<b.length;f++)qb(a,b[f],c,d,e);return null}c=rb(c);return a&&a[U]?a.h(b,c,q(d)?!!d.capture:!!d,e):sb(a,b,c,!0,d,e)}
function xb(a){if("number"!==typeof a&&a&&!a.g){var b=a.src;if(b&&b[U])b.i(a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(vb(c),d):b.addListener&&b.removeListener&&b.removeListener(d);ob--;if(c=tb(b)){d=a.type;if(d in c.g){var e=c.g[d],f=Sa(e,a),g;(g=0<=f)&&Array.prototype.splice.call(e,f,1);g&&(lb(a),0==c.g[d].length&&(delete c.g[d],c.h--))}0==c.h&&(c.src=null,b[mb]=null)}else lb(a)}}}
function vb(a){return a in nb?nb[a]:nb[a]="on"+a}function wb(a,b){if(a.g)a=!0;else{b=new T(b,this);var c=a.listener,d=a.h||a.src;a.o&&xb(a);a=c.call(d,b)}return a}function tb(a){a=a[mb];return a instanceof V?a:null}var yb="__closure_events_fn_"+(1E9*Math.random()>>>0);function rb(a){if("function"===typeof a)return a;a[yb]||(a[yb]=function(b){return a.handleEvent(b)});return a[yb]};function W(a){L.call(this);this.l=a;this.i={}}ka(W,L);var zb=[];function Ab(a){Za(a.i,function(b,c){this.i.hasOwnProperty(c)&&xb(b)},a);a.i={}}W.prototype.j=function(){W.m.j.call(this);Ab(this)};W.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function Bb(a,b,c,d){b=void 0===b?!1:b;c=void 0===c?!1:c;d=void 0===d?"editors":d;L.call(this);this.i=a||document.body;this.s=!!b;this.A=!!c;this.B=d;this.l=new W(this);a=ja(Ya,this.l);this.h?a():(this.g||(this.g=[]),this.g.push(a));a=this.l;b=this.i;c=this.C;d="click";Array.isArray(d)||(d&&(zb[0]=d.toString()),d=zb);for(var e=0;e<d.length;e++){var f=pb(b,d[e],c||a.handleEvent,!1,a.l||a);if(!f)break;a.i[f.key]=f}}n(Bb,L);
Bb.prototype.C=function(a){if(!(0!=a.h.button||Xa&&a.ctrlKey||a.i))for(var b=a.target;b&&b!=this.i;){if(b.tagName&&"a"==b.tagName.toLowerCase()){var c=b.getAttribute("href")||b.getAttributeNS("http://www.w3.org/1999/xlink","href"),d=za(c);if(c!=d){a:{b=void 0;Ea();try{b=Aa(d)}catch(v){v=ra(v);if(v instanceof A){b=!1;break a}throw v.g;}var e;if(e=null!=b){e=(wa(),va);var f=ua;b=Object.is(e,f)||null==e&&null==f?b.toLocaleLowerCase():b.toLowerCase();e=".google.com"===b.substr(b.length-11|0,11)}b=e}if(!b)if(this.A){c=
za(d);if(Object.is(c,d)||null==c&&null==d)d="//www.google.com/url?q="+w(encodeURIComponent(d)),d=w(d)+"&sa=D";d+="&source="+this.B}else d=this.s?c:d;var g=d;b=void 0;c={target:"_blank",noreferrer:!0};d=window;g instanceof O?e=g:(e="undefined"!=typeof g.href?g.href:String(g),e instanceof O||(e="object"==typeof e&&e.h?e.g():String(e),cb.test(e)?e=new O(e,P):(e=String(e),e=e.replace(/(%0A|%0D)/g,""),e=e.match(bb)?new O(e,P):null)),e=e||eb);var h=void 0!==self.crossOriginIsolated;f="strict-origin-when-cross-origin";
window.Request&&(f=(new Request("/")).referrerPolicy);var Db="unsafe-url"===f;f=c.noreferrer;if(h&&f){if(Db)throw Error("Cannot use the noreferrer option on a page that sets a referrer-policy of `unsafe-url` in modern browsers!");f=!1}g=c.target||g.target;h=[];for(b in c)switch(b){case "width":case "height":case "top":case "left":h.push(b+"="+c[b]);break;case "target":case "noopener":case "noreferrer":break;default:h.push(b+"="+(c[b]?1:0))}b=h.join(",");if((K("iPhone")&&!K("iPod")&&!K("iPad")||K("iPad")||
K("iPod"))&&d.navigator&&d.navigator.standalone&&g&&"_self"!=g)c="A",b=document,c=String(c),"application/xhtml+xml"===b.contentType&&(c=c.toLowerCase()),b=c=b.createElement(c),e=e instanceof O?e:db(e),b.href=Q(e),c.setAttribute("target",g),f&&c.setAttribute("rel","noreferrer"),b=document.createEvent("MouseEvent"),b.initMouseEvent("click",!0,!0,d,1),c.dispatchEvent(b);else if(f){if(d=gb("",d,g,b),c=Q(e),d){Ua&&-1!=c.indexOf(";")&&(c="'"+c.replace(/'/g,"%27")+"'");d.opener=null;""===c&&(c="javascript:''");
Na.test(c)&&(-1!=c.indexOf("&")&&(c=c.replace(Ha,"&amp;")),-1!=c.indexOf("<")&&(c=c.replace(Ia,"&lt;")),-1!=c.indexOf(">")&&(c=c.replace(Ja,"&gt;")),-1!=c.indexOf('"')&&(c=c.replace(Ka,"&quot;")),-1!=c.indexOf("'")&&(c=c.replace(La,"&#39;")),-1!=c.indexOf("\x00")&&(c=c.replace(Ma,"&#0;")));c='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+c+'">';if(void 0===M)if(b=null,(e=p.trustedTypes)&&e.createPolicy){try{b=e.createPolicy("goog#html",{createHTML:r,createScript:r,
createScriptURL:r})}catch(v){p.console&&p.console.error(v.message)}M=b}else M=b;c=(b=M)?b.createHTML(c):c;c=new R(c,null,fb);(d=d.document)&&d.write&&(d.write(c instanceof R&&c.constructor===R?c.i:"type_error:SafeHtml"),d.close())}}else(d=gb(e,d,g,b))&&c.noopener&&(d.opener=null);a.g();break}}b=b.parentNode}};function Cb(a,b,c,d){new Bb(a,void 0===b?!1:b,void 0===c?!1:c,d)}var X=["DOCS_installLinkReferrerSanitizer"],Y=p;X[0]in Y||"undefined"==typeof Y.execScript||Y.execScript("var "+X[0]);
for(var Z;X.length&&(Z=X.shift());)X.length||void 0===Cb?Y[Z]&&Y[Z]!==Object.prototype[Z]?Y=Y[Z]:Y=Y[Z]={}:Y[Z]=Cb;}).call(this);
</script><script type="text/javascript" nonce="">DOCS_installLinkReferrerSanitizer( undefined,  true,  true, 'docs');</script></body></html>