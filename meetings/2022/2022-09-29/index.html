<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ul.lst-kix_frghpoxo5fc1-3{list-style-type:none}ul.lst-kix_frghpoxo5fc1-4{list-style-type:none}ul.lst-kix_frghpoxo5fc1-5{list-style-type:none}ul.lst-kix_frghpoxo5fc1-6{list-style-type:none}ul.lst-kix_frghpoxo5fc1-0{list-style-type:none}ul.lst-kix_frghpoxo5fc1-1{list-style-type:none}ul.lst-kix_frghpoxo5fc1-2{list-style-type:none}.lst-kix_frghpoxo5fc1-8>li:before{content:"\0025a0  "}.lst-kix_898kem1sf01l-8>li:before{content:"\0025a0  "}ul.lst-kix_frghpoxo5fc1-7{list-style-type:none}ul.lst-kix_frghpoxo5fc1-8{list-style-type:none}ul.lst-kix_obs4pucdmfj6-1{list-style-type:none}ul.lst-kix_obs4pucdmfj6-0{list-style-type:none}ul.lst-kix_898kem1sf01l-1{list-style-type:none}.lst-kix_frghpoxo5fc1-4>li:before{content:"\0025cb  "}.lst-kix_frghpoxo5fc1-6>li:before{content:"\0025cf  "}ul.lst-kix_898kem1sf01l-0{list-style-type:none}.lst-kix_898kem1sf01l-4>li:before{content:"\0025cb  "}.lst-kix_898kem1sf01l-6>li:before{content:"\0025cf  "}ul.lst-kix_898kem1sf01l-3{list-style-type:none}ul.lst-kix_898kem1sf01l-2{list-style-type:none}ul.lst-kix_898kem1sf01l-5{list-style-type:none}.lst-kix_frghpoxo5fc1-3>li:before{content:"\0025cf  "}.lst-kix_frghpoxo5fc1-7>li:before{content:"\0025cb  "}.lst-kix_898kem1sf01l-3>li:before{content:"\0025cf  "}ul.lst-kix_898kem1sf01l-4{list-style-type:none}.lst-kix_898kem1sf01l-7>li:before{content:"\0025cb  "}ul.lst-kix_898kem1sf01l-7{list-style-type:none}ul.lst-kix_898kem1sf01l-6{list-style-type:none}ul.lst-kix_898kem1sf01l-8{list-style-type:none}.lst-kix_frghpoxo5fc1-5>li:before{content:"\0025a0  "}.lst-kix_898kem1sf01l-5>li:before{content:"\0025a0  "}.lst-kix_obs4pucdmfj6-4>li:before{content:"\0025cb  "}.lst-kix_obs4pucdmfj6-6>li:before{content:"\0025cf  "}ul.lst-kix_4im14x7d3c5f-8{list-style-type:none}ul.lst-kix_4im14x7d3c5f-7{list-style-type:none}.lst-kix_obs4pucdmfj6-5>li:before{content:"\0025a0  "}ul.lst-kix_4im14x7d3c5f-6{list-style-type:none}ul.lst-kix_obs4pucdmfj6-8{list-style-type:none}ul.lst-kix_obs4pucdmfj6-7{list-style-type:none}.lst-kix_obs4pucdmfj6-0>li:before{content:"\0025cf  "}ul.lst-kix_obs4pucdmfj6-6{list-style-type:none}.lst-kix_obs4pucdmfj6-8>li:before{content:"\0025a0  "}ul.lst-kix_obs4pucdmfj6-5{list-style-type:none}ul.lst-kix_obs4pucdmfj6-4{list-style-type:none}ul.lst-kix_obs4pucdmfj6-3{list-style-type:none}ul.lst-kix_obs4pucdmfj6-2{list-style-type:none}.lst-kix_obs4pucdmfj6-7>li:before{content:"\0025cb  "}.lst-kix_gipt4arx6e8n-8>li:before{content:"\0025a0  "}.lst-kix_gipt4arx6e8n-6>li:before{content:"\0025cf  "}.lst-kix_gipt4arx6e8n-7>li:before{content:"\0025cb  "}.lst-kix_obs4pucdmfj6-1>li:before{content:"\0025cb  "}ul.lst-kix_4im14x7d3c5f-5{list-style-type:none}ul.lst-kix_4im14x7d3c5f-4{list-style-type:none}.lst-kix_4im14x7d3c5f-5>li:before{content:"\0025a0  "}ul.lst-kix_4im14x7d3c5f-3{list-style-type:none}.lst-kix_obs4pucdmfj6-2>li:before{content:"\0025a0  "}ul.lst-kix_4im14x7d3c5f-2{list-style-type:none}ul.lst-kix_4im14x7d3c5f-1{list-style-type:none}ul.lst-kix_4im14x7d3c5f-0{list-style-type:none}.lst-kix_4im14x7d3c5f-6>li:before{content:"\0025cf  "}.lst-kix_4im14x7d3c5f-7>li:before{content:"\0025cb  "}.lst-kix_obs4pucdmfj6-3>li:before{content:"\0025cf  "}.lst-kix_gipt4arx6e8n-0>li:before{content:"\0025cf  "}.lst-kix_4im14x7d3c5f-8>li:before{content:"\0025a0  "}.lst-kix_gipt4arx6e8n-2>li:before{content:"\0025a0  "}.lst-kix_gipt4arx6e8n-3>li:before{content:"\0025cf  "}.lst-kix_gipt4arx6e8n-4>li:before{content:"\0025cb  "}.lst-kix_4im14x7d3c5f-4>li:before{content:"\0025cb  "}ul.lst-kix_gipt4arx6e8n-7{list-style-type:none}ul.lst-kix_gipt4arx6e8n-8{list-style-type:none}ul.lst-kix_gipt4arx6e8n-5{list-style-type:none}.lst-kix_4im14x7d3c5f-2>li:before{content:"\0025a0  "}.lst-kix_4im14x7d3c5f-3>li:before{content:"\0025cf  "}ul.lst-kix_gipt4arx6e8n-6{list-style-type:none}ul.lst-kix_gipt4arx6e8n-3{list-style-type:none}.lst-kix_gipt4arx6e8n-5>li:before{content:"\0025a0  "}ul.lst-kix_gipt4arx6e8n-4{list-style-type:none}.lst-kix_4im14x7d3c5f-0>li:before{content:"\0025cf  "}.lst-kix_4im14x7d3c5f-1>li:before{content:"\0025cb  "}.lst-kix_gipt4arx6e8n-1>li:before{content:"\0025cb  "}.lst-kix_frghpoxo5fc1-0>li:before{content:"\0025cf  "}.lst-kix_frghpoxo5fc1-2>li:before{content:"\0025a0  "}.lst-kix_898kem1sf01l-0>li:before{content:"\0025cf  "}.lst-kix_898kem1sf01l-2>li:before{content:"\0025a0  "}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}.lst-kix_frghpoxo5fc1-1>li:before{content:"\0025cb  "}.lst-kix_898kem1sf01l-1>li:before{content:"\0025cb  "}ul.lst-kix_gipt4arx6e8n-1{list-style-type:none}ul.lst-kix_gipt4arx6e8n-2{list-style-type:none}ul.lst-kix_gipt4arx6e8n-0{list-style-type:none}ol{margin:0;padding:0}table td,table th{padding:0}.c1{margin-left:36pt;padding-top:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c9{margin-left:72pt;padding-top:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c8{margin-left:108pt;padding-top:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c12{margin-left:144pt;padding-top:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c0{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c4{padding-top:16pt;padding-bottom:4pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c2{color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Arial";font-style:normal}.c7{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Arial";font-style:normal}.c6{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c13{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c10{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c11{background-color:#ffffff;max-width:600pt;}.c3{color:inherit;text-decoration:inherit}.c5{padding:0;margin:0}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c11 doc-content"><h2 class="c6" id="h.9e7az0qzmmzq"><span class="c7">Participants</span></h2><ul class="c5 lst-kix_4im14x7d3c5f-0 start"><li class="c1 li-bullet-0"><span class="c0">Michal Mocny, Nic Jansma, Dan Shappir, Noam Helfman, Asmeet Oberoi, Alex N Jose, Ian Clelland, Rafael Lebre, Yoav Weiss, Lan Wei, Aoyuan Zhou, Amiya Gupta, Nolan Lawson, Abin Paul, Carine Bournez, John Engebretson, Giacomi Zecchini, Daniel Libby, </span></li></ul><h2 class="c6" id="h.dvmbcrhcvr63"><span class="c7">Admin</span></h2><ul class="c5 lst-kix_gipt4arx6e8n-0 start"><li class="c1 li-bullet-0"><span class="c0"><b>Next meeting</b>: October 13th @ 11am EST / 8am PST</span></li><li class="c1 li-bullet-0"><span><b>Nic</b>: Summary of </span><span>post-</span><span class="c10"><a class="c3" href="https://www.google.com/url?q=https://bit.ly/webperf-tpac22&amp;sa=D&amp;source=editors&amp;ust=1670492769986543&amp;usg=AOvVaw3K2UQYhHODJ1DmzGvKleAU">TPAC items</a></span><span class="c0">&nbsp;(minutes, videos, summaries, links&hellip;)</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip;Next meeting at alternative slot 11am EST</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip;We will skip the meeting after that, due to Performance.now (Oct 27)</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip;2 items today</span></li></ul><h2 class="c6" id="h.luos89cj3l69"><span class="c7">Minutes</span></h2><h3 class="c4" id="h.vfflhf724wda"><span class="c10"><a class="c3" href="https://www.google.com/url?q=https://github.com/WICG/element-timing/issues/3&amp;sa=D&amp;source=editors&amp;ust=1670492769987584&amp;usg=AOvVaw2KYrQNDiN7XV9ihAJpY3rQ">Shadow DOM and Element Timing</a></span><span class="c2">&nbsp;followup - Amiya</span></h3><ul class="c5 lst-kix_frghpoxo5fc1-0 start"><li class="c1 li-bullet-0"><span class="c0"><b>Amiya</b>: (presented as TPAC, quick review of last update)</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Nic</b>: There&rsquo;s been update on the github issue</span></li><li class="c1 li-bullet-0"><span class="c0">Nolan Lawson:</span></li></ul><ul class="c5 lst-kix_frghpoxo5fc1-1 start"><li class="c9 li-bullet-0"><span class="c0"><b>Contex</b>: at salesforce we&rsquo;ve been looking at something similar with Aria ID reflection, so I thought this was similar enough I took a stab at it</span></li><li class="c9 li-bullet-0"><span class="c0">I presented a few options on the github issue</span></li></ul><ul class="c5 lst-kix_frghpoxo5fc1-2 start"><li class="c8 li-bullet-0"><span class="c0">Option 1 - top down, seemed to be shut down fairly quickly</span></li><li class="c8 li-bullet-0"><span class="c0">Option 2 - bottom up, and every level of the shadow tree has to opt-in. Preserves encapsulation</span></li><li class="c8 li-bullet-0"><span class="c0">Option 3 - just works</span></li><li class="c8 li-bullet-0"><span class="c0">Option 4 - a flavor of option 2, but have to delegate once, and skip shadow roots</span></li><li class="c8 li-bullet-0"><span class="c0">Option 5 - by default, the element timing attribute would get the top-most shadow root into the perf entry</span></li></ul><ul class="c5 lst-kix_frghpoxo5fc1-3 start"><li class="c12 li-bullet-0"><span class="c0">Opt in would expose the actual element</span></li></ul><ul class="c5 lst-kix_frghpoxo5fc1-0"><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: Struggling with encapsulation argument</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; not sure I fully grasp what it&rsquo;s trying to preserve, other than theoretical purity</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; seems like shadow-roots and element don&rsquo;t have their own execution context</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; if writing things to window, it&rsquo;s on window, same with console.log</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; not sure what exactly we&rsquo;d gain from trying to contain their timings outside of the global</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; doesn&rsquo;t seem more ergonomic</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; not sure if there&rsquo;s another argument favoring encapsulation beyond developer ergonomics</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; unfortunately we don&rsquo;t have those individuals arguing in favor of encapsulation here</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; folks who are more likely than me to use this API, is there a preferred option there from a developer perspective</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Nolan</b>: I&rsquo;d be interested in hearing from Amiya as well, pretty much any of these options work for us</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; we control our framework so we can do whatever we want</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; worry about using from multiple frameworks and trying to stitch together</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Option 2 having to bubble up, I&rsquo;m fine with it, but it&rsquo;s not ideal</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: Follow question, in this scenario you will always opt-in if there are some components that report to themselves but not global, is this interesting?</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Nolan</b>: [shook head no]</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Amiya</b>: Dealing with first party scenarios where you can mandate, we can do that</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; the third-party scenario is interesting, but is it fair for web components to be able to hide web timings from a page hosting it.</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; can the component decide what the page can do but not vice-versa?</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; in practical terms that&rsquo;s not something I&rsquo;m dealing with at the moment</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Michal</b>: Context of Github issue is ElementTiming and developer wanting to measure timing of the whole component or elements in component. &nbsp;How does this relate to LCP, in particular your proposal Yoav in Option 5, by default whole shadow-root would be treated as single element</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; If a user would opt-in it would be sliced, would it affect LCP</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; What is the relationship between shadow root, custom elements and LCP?</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: Difference between element timing and what Chromium does</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Chromium nullifies element, ID maintains element timing values as identifier</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; I was proposing something similar</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; I think this makes general sense from LCP</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Opt-in could help people get more details from LCP, but I wouldn&rsquo;t want it to change values reported from LCP</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Michal</b>: One argument for encapsulation is if you import a custom list button, or a whole app, but to treat that as one big element from LCP perspective, encapsulation doesn&rsquo;t make sense from element timing</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Don&rsquo;t know if you can have a single blanket policy</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Weird to have developer be able to make that distinction</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: For LCP, assuming that an opt-in doesn&rsquo;t change the result, but just the attribution, does it make a significant difference?</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Michal</b>: No</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; I like the Option 5, I was just curious how it relates to LCP</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: We&rsquo;ll need to change the definition so LCP is changed regardless of how the attribution happens</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; We&rsquo;ll split the attribution below that point</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Nolan</b>: If we took your Option 5 and forgot about the option, is that inline with the current spec today?</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: It is not what the current spec says, but it doesn&rsquo;t seem hard to do that</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; As well as modify the implementation, it doesn&rsquo;t sound possible</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Ian</b>: Not sure about reasoning the component author to opt-in, there is no security boundary between component and page that embeds it</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Seems weird person debugging components needs cooperation of library author</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Looking at MutationObserver model, it doesn&rsquo;t descend into shadow-roots, but developer can attach</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; If we&rsquo;re not going to change defaults, person who owns the page embedding it in, should have the permission to inspect further</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Nolan</b>: I can&rsquo;t speak for Anne and Ryosuke, but to convey their argument, I think a lot of developers think open shadow root as default, but if you assume closed shadow root as dom, it makes sense</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; In closed shadow dom, you can&rsquo;t traverse elements on page</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: I did see a hack where you can override attach window and make those closed shadow roots open</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Nolan</b>: Not going to dispute that</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Ian</b>: Argument there&rsquo;s no security boundary</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Nolan</b>: New specs should not make a distinction between open and closed shadow roots, we should default to the closed model</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: Do you know where this is, there&rsquo;s no web components WG, used to be a CG, things were all dispatched into various different specs</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Is there a community where we can have that discussion?</span></li><li class="c1 li-bullet-0"><span><b>Nolan</b>: </span><span class="c10"><a class="c3" href="https://www.google.com/url?q=https://www.w3.org/community/webcomponents/&amp;sa=D&amp;source=editors&amp;ust=1670492769996127&amp;usg=AOvVaw0WC6Jfm0JjEwYq8CFAhe1Q">WebComponetns CG</a></span><span class="c0">, I can make introductions</span></li></ul><p class="c13"><span class="c0"></span></p><h3 class="c4" id="h.vgy4djqj3h3a"><span class="c10"><a class="c3" href="https://www.google.com/url?q=https://bugs.chromium.org/p/chromium/issues/detail?id%3D1365808&amp;sa=D&amp;source=editors&amp;ust=1670492769996917&amp;usg=AOvVaw206g21bSNdg_G-RQ4WWhUM">What is time anyway</a></span><span class="c2">&nbsp;- Yoav/Daniel Libby/NoamH</span></h3><ul class="c5 lst-kix_obs4pucdmfj6-0 start"><li class="c1 li-bullet-0"><span class="c0"><b>Daniel Libby</b>: Recent change in Chromium to make time more in spec</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Changed when document was created based on system clock at the time</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Since then there have been two patches to adhere to a notion of a monotonically non decreasing clock</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Doesn&rsquo;t change between multiple browsers/tabs in same session</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; On Windows specifically, this had the effect of adding clock skew that happens over a browser session start to affect the metrics that web apps we&rsquo;re using to measure performance</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; End-to-end scenario of using and external timestamp based on system clock to monotonically increasing performance timing clock, is the wrong comparison to make</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; These timestamps have looked close to the Unix Epoch in the past</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Developers have compared these values</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Want to get opinions from others in WG</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Should timeOrigin be tied to the system clock at all?</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Or should it be tied to a system counter</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: From my perspective we&rsquo;re trading off two desired characteristics here</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; One is to have consistency across all the timestamps that one would measure during the lifetime of a page and across different documents</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; You don&rsquo;t want skew between those two measurements</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; If you got a timestamp and user modified their clock or NTP, you don&rsquo;t want timestamp to be short or long based on those clock changes</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Thought process behind the spec as it is today</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; What I&rsquo;m hearing from you there&rsquo;s also a desire to compare those timestamps over time to some external clock, and know they don&rsquo;t skew over time</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Does that capture the problem well?</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Daniel</b>: Yes</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: Would like to hear more about use-case</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Nic</b>: Would this affect performance.now() or just .timeOrigin</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: You could have multiple documents with its own timeOrigin</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Measurements inside of a single documents could be fine</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Nic</b>: Only affects multiple documents over time</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: I think if you open multiple documents over time you&rsquo;ll see a skew over time</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Ashmeet</b>: Scenario: A webpage is loading in a browser, having that origin timestamp moving to another API like navigationStart, would not be affected. &nbsp;But we started seeing scenarios where we compare an external action which led to that document that opened that browser. &nbsp;Clicking on a doc or link in a desktop app, where you&rsquo;re now comparing that with timeOrigin.</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; That gap, is larger</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: Mostly around the opening of a document from a different document, or different links in different places</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Nic</b>: Why does one need to compare timeOrigins across documents?</span></li><li class="c1 li-bullet-0"><span class="c0">Yoav:</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Noam</b>: Discussion we had two years ago about this exact scenario - user clicks on a link or opens an app with a bookmark and we need a reliable way to understand the interaction from one place to when the navigation started</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; no proposals to address that, but it is an important need</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; relied on time origin in some scenarios, and compared it to another timestamp</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: So you compared timeOiring to timestamp that represented Epoch time in non-browser contexts?</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Noam</b>: In this case I think it was a browser context yes, but a separate origin</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Ashmeet</b>: Could be browser or non-browser</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Issue shows up in both cases</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: If we&rsquo;re just talking about the timeOrigin, there&rsquo;s a tradeoff I had in mind, but I think it&rsquo;s potentially off.</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; The only cost of maintaining the skewing between documents is we have a hard time still comparing between different contexts</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; The skew there will accumulate</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; For the navigation point itself we won&rsquo;t have skew, but if we have a timestamp in two contexts, we&rsquo;ll need to sync clocks to reduce skew before we compare</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Where if we kept timeOrigins in sync we won&rsquo;t have that problem</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Noam</b>: Spec doesn&rsquo;t require timeOrigin to be same across different contexts, but I wonder if there is a way to have some context that is shared</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; System clock is not reliable, from time of interact to other, it could be adjusted by user/NTP</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Michal</b>: I think Noam just said what I was going to say</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; In many use-cases we&rsquo;re sampling time at different moments, because even if we sync, the samples will be from different</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Noam</b>: Not saying we need to change timeOrigin, maybe need for another API that provides consistent time across contexts</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: timeOrigin to calculate timestamps, a systemTime to enable those kind of comparisons across different documents</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Noam</b>: And external apps</span></li><li class="c1 li-bullet-0"><span class="c0">... There was a launchTime which would reflect when a document was launched in terms of interaction, could be another origin that launched it</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Our life of page measurements begins at navigationStart</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; We don&rsquo;t know what happens out of that</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; There&rsquo;s an important case in understanding the gap between the initiator timestamp and the actual document navigationStart</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Having something between them is not trivial to do</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Daniel</b>: You&rsquo;d need the system monotonic clock, from my understanding that&rsquo;s a platform-specific thing</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Would require external applications to use that same source</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: At least some implementations, the clock-code is platform specific</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Assuming other platforms have similar monotonic clocks, reflecting those directly somehow doesn&rsquo;t seem impossible</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Ian</b>: Are there two different things being asked for? &nbsp;One is a monotonically increasing clock running in the context o f the page, os even if the user adjusts the time while page is running,w e still have a sequentially increasing clock</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; The other thing is the guarantee to tie this to system time across documents, origins, processes, that&rsquo;s a different requirement</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: As Dan said, there are also workers, but yes</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Ian</b>: Preventing clock skew within document makes sense</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; But requirement that this always conforms to exact system time seems harder and different</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; I&rsquo;m wondering if those are separable</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Noam</b>: Original issue started with the second aspect, having a global time context (origin)</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Ian</b>: Guaranteed something to be correct across processes</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Ashmeet</b>: The fix is addressing the first one, instead of starting at 0 it starts at ticks and converts into timestamps, the second is the hard one</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Finding the amount of time that something happened between processes is hard</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Marcel</b>: I noticed years ago this drift, I remember searching here for this quick demo</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; [demo]</span></li><li class="c1 li-bullet-0"><span style="overflow: hidden;<b> display</b>: inline-block;<b> margin</b>: 0.00px 0.00px;<b> border</b>: 0.00px solid #000000;<b> transform</b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);<b> width</b>: 624.00px;<b> height</b>: 332.00px;"><img alt="" src="images/image1.png" style="width: 624.00px;<b> height</b>: 332.00px; margin-left: 0.00px; margin-top: 0.00px;<b> transform</b>: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Drift happens on system</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; A lot of users changing their clock, e.g. cheating on games</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; I was trying to use timeOrigin as monotonic clock, we abandoned that case</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; I&rsquo;m running on a Mac</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Linux wasn&rsquo;t a problem depending on the OS or browser</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: From your perspective, this drift is still present after the Chromium change,is that correct?</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Marcel</b>: In beginning it was seconds of drift, now it&rsquo;s half-seconds now</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Redline here is moving average</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Now is much better</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Goal is to send server time and pick this based on monotonicity of timeOrigin and performance.now() instead of when user is picking clock</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; We found other solutions</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Nic</b>: Is the solution to just expose QPC QueryPerformanceCounter in browser, then you can compare across apps and browser tabs</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: Seems potentially risky as Ian points out elsewhere</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Ian</b>: Security teams have real issues when exposing high-resolution timestamps</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Marcel</b>: When I noticed was when Spectre mattered</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: Skew you&rsquo;re seeing is not related to fuzzing?</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Marcel</b>: [nods]</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: What would be good next steps?</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Daniel</b>: I do think authors have what they need to get that value, system clock vs timeOrigin, subtract performance.timeOrigin - Date.now(), from compat perspective </span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Second question is do we need a system wide monotonically increasing clock that is subtly different from timeOrignn</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Nic</b>: Not sure you can calculate the drift, as JS start running later</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Ashmeet</b>: what used to be a few milliseconds is now 18 seconds in the 95%ile</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; difference between navigationStart and timeOrigin shows the drift</span></li><li class="c1 li-bullet-0"><span class="c0"><b>Yoav</b>: Continue discussion on issue? &nbsp;Didn&rsquo;t hear a strong opinion from folks on the calls</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Skew vs. exposing some way to coordinate clocks across different contexts</span></li><li class="c1 li-bullet-0"><span class="c0">&hellip; Maybe it&rsquo;s worthwhile to open an issue on HRTIME and explore the use-cases and tradeoffs further there</span></li><li class="c1 li-bullet-0"><span><b>Issue created</b>: </span><span class="c10"><a class="c3" href="https://www.google.com/url?q=https://github.com/w3c/hr-time/issues/141&amp;sa=D&amp;source=editors&amp;ust=1670492770012107&amp;usg=AOvVaw2qA5tLK_ss062BEHoHLiPj">https://github.com/w3c/hr-time/issues/141</a></span><span class="c0">&nbsp;</span></li></ul></body></html>